"use strict";var table="";Ink.createModule("Ink.Comix.IViews","1",["Ink.Dom.Css_1"],function(a){var b={_privateMethod:function(){return null},publicProperty:"",loadSummary:function(){var a=this.getFilterParams();"none"===Ink.i("summaryBox").style.display&&new Ink.Net.Ajax("summary?",{method:"GET",contentType:"application/json",parameters:a,sanitizeJSON:!0,onSuccess:function(a){200===a.status?Ink.i("summaryBox").innerHTML=new EJS({url:"public/ejs/summary.html"}).render(a.responseJSON):b.showMessage("Error loading summary data !")}}),this.showHide("summary")},showHide:function(b){"create"===b?(Ink.i("createForm").reset(),a.hide(Ink.i("updateForm")),a.hide(Ink.i("uploadForm")),a.hide(Ink.i("filterForm")),a.hide(Ink.i("summaryBox")),a.toggle(Ink.i("createForm"))):"summary"===b?(a.hide(Ink.i("updateForm")),a.hide(Ink.i("uploadForm")),a.hide(Ink.i("createForm")),a.hide(Ink.i("filterForm")),a.toggle(Ink.i("summaryBox"))):(a.hide(Ink.i("updateForm")),a.hide(Ink.i("uploadForm")),a.hide(Ink.i("createForm")),a.hide(Ink.i("summaryBox")),a.toggle(Ink.i("filterForm")))},showUpdateForm:function(c){a.show(Ink.i("updateForm")),a.hide(Ink.i("uploadForm")),a.hide(Ink.i("createForm")),a.hide(Ink.i("filterForm")),a.hide(Ink.i("summaryBox")),new Ink.Net.Ajax("get/",{method:"GET",contentType:"application/json",parameters:{id:c},sanitizeJSON:!0,onSuccess:function(a){if(200===a.status){var c=a.responseJSON;c.KO?b.showMessage("Error extracting record !"):("undefined"!=typeof c.status&&(c.status=c.status.toString()),"undefined"!=typeof c.language_skills&&(c.language_skills=c.language_skills.toString()),Ink.Dom.FormSerialize.fillIn("updateForm",c))}}})},showUploadForm:function(){a.show(Ink.i("uploadForm")),a.hide(Ink.i("createForm")),a.hide(Ink.i("filterForm")),a.hide(Ink.i("summaryBox")),Ink.i("uploadIFrame").src="form/?id="+Ink.i("u__id").value},downloadFile:function(){Ink.i("downloadIFrame").src="download/?id="+Ink.i("u__id").value},showMessage:function(a,b,c){c=c||5e3,Ink.i("msgBox").innerHTML=new EJS({url:"public/ejs/message.html"}).render({msg:a}),setTimeout(function(){"function"==typeof b&&b(),Ink.i("msgBox").innerHTML=""},c)},userCreate:function(){return Ink.UI.FormValidator_1.validate(Ink.i("createForm"))?(new Ink.Net.Ajax("create/",{method:"GET",contentType:"application/json",parameters:Ink.Dom.FormSerialize.serialize("createForm"),sanitizeJSON:!0,onSuccess:function(a){if(200===a.status){var c=a.responseJSON;c.KO?b.showMessage("Error Creating the Record"):b.filterTable()}}}),void 0):!1},userUpdate:function(){return Ink.UI.FormValidator_1.validate(Ink.i("updateForm"))?(new Ink.Net.Ajax("update/",{method:"GET",contentType:"application/json",parameters:Ink.Dom.FormSerialize.serialize("updateForm"),sanitizeJSON:!0,onSuccess:function(a){if(200===a.status){var c=a.responseJSON;c.KO?b.showMessage("Error Updating the Record"):b.filterTable()}}}),void 0):!1},userDelete:function(a){var c=confirm("Do you really want to delete the record?");return c?(new Ink.Net.Ajax("delete/",{method:"GET",contentType:"application/json",parameters:{id:a},sanitizeJSON:!0,onSuccess:function(a){if(200===a.status){var c=a.responseJSON;c.KO?b.showMessage("Error Deleting the Record !"):b.filterTable()}}}),void 0):!1},getFilterParams:function(){var a=Ink.Dom.FormSerialize.serialize("filterForm"),b="";for(var c in a)"undefined"!=typeof a[c]&&a[c]&&(b+="&"+c+"="+a[c]);return b},filterTable:function(){var a=this.getFilterParams();table&&(table._pagination._element.innerHTML=""),this.initTable(a)},initTable:function(a){var b={id:{"class":"hide-small"},name:"",phone:{"class":"hide-small"},skills:{"class":"hide-small"},minutes:{"class":"hide-small"},status:{"class":"hide-small hide-medium"},date:{"class":"hide-small hide-medium"},action:{"class":""}},c="/list?"+(a||"");table=new Ink.UI.Table(".ink-table",{endpoint:c,tdOptions:b})}};return b}),Ink.requireModules(["Ink.Dom.Loaded_1","Ink.Dom.Event_1","Ink.Comix.IViews"],function(a,b,c){a.run(function(){c.initTable(),b.observe(Ink.i("menuSummary"),"click",function(a){b.stop(a),c.loadSummary()}),b.observe(Ink.i("menuNew"),"click",function(a){b.stop(a),c.showHide("create")}),b.observe(Ink.i("menuFilter"),"click",function(a){b.stop(a),c.showHide()}),b.observe(Ink.i("formSearch"),"click",function(a){b.stop(a),c.filterTable()}),b.observe(Ink.i("formSave"),"click",function(a){b.stop(a),c.userCreate()}),b.observe(Ink.i("formUpdate"),"click",function(a){b.stop(a),c.userUpdate()}),b.observe(Ink.i("formShowUpload"),"click",function(a){b.stop(a),c.showUploadForm()}),b.observe(Ink.i("formDownload"),"click",function(a){b.stop(a),c.downloadFile()})})});